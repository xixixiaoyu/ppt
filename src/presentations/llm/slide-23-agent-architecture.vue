<script setup lang="ts">
import { ref } from 'vue'

const activeFeature = ref('brain')

const features = [
  {
    id: 'brain',
    icon: 'ğŸ§ ',
    title: 'Brain (LLM)',
    description: 'æ ¸å¿ƒæ§åˆ¶å™¨',
    details: [
      'è´Ÿè´£æ¨ç†ã€è§„åˆ’å’Œå†³ç­–åˆ¶å®š',
      'å¤„ç†è¾“å…¥ä¿¡æ¯ï¼Œè°ƒç”¨è®°å¿†ï¼Œå†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨',
      'Prompt Engineering å®šä¹‰ Agent è§’è‰²å’Œè¡Œä¸ºå‡†åˆ™',
    ],
  },
  {
    id: 'planning',
    icon: 'ğŸ“',
    title: 'Planning (è§„åˆ’)',
    description: 'ä»»åŠ¡æ‹†è§£ä¸åæ€',
    details: [
      'å­ç›®æ ‡åˆ†è§£ï¼šå¤§ç›®æ ‡æ‹†è§£ä¸ºå°æ­¥éª¤ (CoT, ToT)',
      'åæ€ä¸ä¿®æ­£ï¼šä»é”™è¯¯ä¸­å­¦ä¹ å¹¶ä¼˜åŒ–è¡ŒåŠ¨',
      'ç±»ä¼¼é¡¹ç›®ç»ç†åˆ¶å®šæ‰§è¡Œè®¡åˆ’',
    ],
  },
  {
    id: 'memory',
    icon: 'ğŸ’¾',
    title: 'Memory (è®°å¿†)',
    description: 'ä¸Šä¸‹æ–‡ä¸çŸ¥è¯†åº“',
    details: [
      'çŸ­æœŸè®°å¿†ï¼šä¸Šä¸‹æ–‡çª—å£å†…å®¹ï¼Œè®°å½•å¯¹è¯å†å²',
      'é•¿æœŸè®°å¿†ï¼šå‘é‡æ•°æ®åº“å­˜å‚¨å’Œæ£€ç´¢å¤–éƒ¨çŸ¥è¯†',
      'ç±»ä¼¼äººç±»å·¥ä½œè®°å¿†å’Œé•¿æœŸçŸ¥è¯†å‚¨å¤‡',
    ],
  },
  {
    id: 'tools',
    icon: 'ğŸ› ï¸',
    title: 'Tools (å·¥å…·ä½¿ç”¨)',
    description: 'æ‰§è¡Œè¡ŒåŠ¨çš„èƒ½åŠ›',
    details: [
      'æ‰©å±• LLM èƒ½åŠ›è¾¹ç•Œï¼Œè¶…è¶Šæ–‡æœ¬ç”Ÿæˆ',
      'å¸¸è§å·¥å…·ï¼šè®¡ç®—å™¨ã€ä»£ç è§£é‡Šå™¨ã€æœç´¢å¼•æ“ã€API',
      'é€šè¿‡ Function Calling æˆ– MCP åè®®è¿æ¥å¤–éƒ¨ä¸–ç•Œ',
    ],
  },
  {
    id: 'react',
    icon: 'ğŸ”„',
    title: 'ReAct Framework',
    description: 'Reasoning + Acting',
    details: [
      'æ ¸å¿ƒæ€æƒ³ï¼šæ¨ç†å’Œè¡ŒåŠ¨äº¤ç»‡å½¢æˆé—­ç¯',
      'ä¸‰æ­¥å¾ªç¯ï¼šThought â†’ Action â†’ Observation',
      'ä¼˜åŠ¿ï¼šå¤„ç†å¤æ‚ä»»åŠ¡ï¼Œæ”¯æŒé”™è¯¯è‡ªæˆ‘ä¿®æ­£',
    ],
  },
]
</script>

<template>
  <section class="container mx-auto max-w-7xl px-6 py-12 h-full flex flex-col">
    <div class="mb-8 text-center flex-shrink-0">
      <h2
        class="inline-block text-4xl md:text-5xl font-bold leading-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600"
        style="letter-spacing: 0.025em; line-height: 1.2"
      >
        AI Agent æ™ºèƒ½ä½“æ¶æ„
      </h2>
      <p class="mt-4 text-xl text-slate-600 max-w-3xl mx-auto">
        Agent = LLM + Planning + Memory + Tools
      </p>
    </div>

    <div
      class="flex-grow grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-0"
    >
      <!-- Left: Interactive Architecture Diagram -->
      <div
        class="relative h-full min-h-[400px] bg-white/50 rounded-3xl border border-slate-200 shadow-xl backdrop-blur-sm p-8 flex flex-col justify-center items-center select-none overflow-hidden group"
      >
        <!-- Background Grid -->
        <div
          class="absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))] -z-10"
        ></div>

        <!-- Central Brain -->
        <div
          @click="activeFeature = 'brain'"
          class="relative z-20 w-40 h-40 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-2xl cursor-pointer transition-all duration-300 hover:scale-110 ring-4 ring-offset-4"
          :class="
            activeFeature === 'brain'
              ? 'ring-indigo-300 scale-110'
              : 'ring-transparent'
          "
        >
          <div class="text-6xl animate-pulse">ğŸ§ </div>
          <span class="absolute -bottom-8 font-bold text-slate-700"
            >Brain (LLM)</span
          >
        </div>

        <!-- Orbiting Nodes -->
        <div
          class="absolute inset-0 flex items-center justify-center pointer-events-none"
        >
          <!-- Planning Node (Top) -->
          <div
            class="absolute -translate-y-40 pointer-events-auto"
            @click="activeFeature = 'planning'"
          >
            <div
              class="w-24 h-24 rounded-2xl bg-white border-2 border-blue-200 shadow-lg flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-110 hover:border-blue-400 hover:shadow-blue-200/50"
              :class="
                activeFeature === 'planning'
                  ? 'border-blue-500 shadow-blue-300/50 scale-110'
                  : ''
              "
            >
              <span class="text-4xl">ğŸ“</span>
            </div>
            <span
              class="absolute w-full text-center top-full mt-2 font-semibold text-slate-600"
              >Planning</span
            >
            <!-- Connection Line -->
            <div
              class="absolute top-full left-1/2 w-0.5 h-16 bg-slate-300 -z-10 origin-top"
            ></div>
          </div>

          <!-- Memory Node (Right) -->
          <div
            class="absolute translate-x-40 pointer-events-auto"
            @click="activeFeature = 'memory'"
          >
            <div
              class="w-24 h-24 rounded-2xl bg-white border-2 border-emerald-200 shadow-lg flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-110 hover:border-emerald-400 hover:shadow-emerald-200/50"
              :class="
                activeFeature === 'memory'
                  ? 'border-emerald-500 shadow-emerald-300/50 scale-110'
                  : ''
              "
            >
              <span class="text-4xl">ğŸ’¾</span>
            </div>
            <span
              class="absolute w-full text-center top-full mt-2 font-semibold text-slate-600"
              >Memory</span
            >
            <!-- Connection Line -->
            <div
              class="absolute right-full top-1/2 h-0.5 w-16 bg-slate-300 -z-10"
            ></div>
          </div>

          <!-- Tools Node (Bottom) -->
          <div
            class="absolute translate-y-40 pointer-events-auto"
            @click="activeFeature = 'tools'"
          >
            <div
              class="w-24 h-24 rounded-2xl bg-white border-2 border-amber-200 shadow-lg flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-110 hover:border-amber-400 hover:shadow-amber-200/50"
              :class="
                activeFeature === 'tools'
                  ? 'border-amber-500 shadow-amber-300/50 scale-110'
                  : ''
              "
            >
              <span class="text-4xl">ğŸ› ï¸</span>
            </div>
            <span
              class="absolute w-full text-center top-full mt-2 font-semibold text-slate-600"
              >Action</span
            >
            <!-- Connection Line -->
            <div
              class="absolute bottom-full left-1/2 w-0.5 h-16 bg-slate-300 -z-10"
            ></div>
          </div>

          <!-- ReAct Node (Bottom Left) -->
          <div
            class="absolute -translate-x-28 translate-y-28 pointer-events-auto"
            @click="activeFeature = 'react'"
          >
            <div
              class="w-20 h-20 rounded-2xl bg-white border-2 border-rose-200 shadow-lg flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-110 hover:border-rose-400 hover:shadow-rose-200/50"
              :class="
                activeFeature === 'react'
                  ? 'border-rose-500 shadow-rose-300/50 scale-110'
                  : ''
              "
            >
              <span class="text-3xl">ğŸ”„</span>
            </div>
            <span
              class="absolute w-full text-center top-full mt-2 font-semibold text-slate-600"
              >ReAct</span
            >
            <!-- Connection Hint -->
            <div
              class="absolute -top-2 -right-2 w-16 h-0.5 bg-slate-300 -z-10 origin-left -rotate-45"
            ></div>
          </div>

          <!-- Perception Node (Left - Input) -->
          <div class="absolute -translate-x-40 flex flex-col items-center">
            <div
              class="px-4 py-2 bg-slate-800 text-white rounded-lg shadow-lg mb-2 text-sm font-medium"
            >
              Sensors / User
            </div>
            <div class="w-16 h-0.5 bg-slate-400 relative">
              <div
                class="absolute right-0 top-1/2 -translate-y-1/2 w-2 h-2 border-t-2 border-r-2 border-slate-400 rotate-45"
              ></div>
            </div>
            <span class="text-xs text-slate-500 mt-1">Perception</span>
          </div>
        </div>
      </div>

      <!-- Right: Detail Panel -->
      <div class="h-full flex flex-col justify-center">
        <transition mode="out-in" name="fade-slide">
          <div
            v-if="activeFeature"
            :key="activeFeature"
            class="bg-white/80 backdrop-blur-md rounded-3xl p-8 border border-slate-200 shadow-2xl"
          >
            <div class="flex items-center gap-4 mb-6">
              <span class="text-5xl">{{
                features.find(f => f.id === activeFeature)?.icon
              }}</span>
              <div>
                <h3 class="text-3xl font-bold text-slate-800">
                  {{ features.find(f => f.id === activeFeature)?.title }}
                </h3>
                <p class="text-lg text-slate-500 font-medium">
                  {{ features.find(f => f.id === activeFeature)?.description }}
                </p>
              </div>
            </div>

            <ul class="space-y-4">
              <li
                v-for="(point, idx) in features.find(
                  f => f.id === activeFeature
                )?.details"
                :key="idx"
                class="flex items-start gap-3 text-lg text-slate-700 leading-relaxed"
              >
                <span
                  class="mt-1.5 w-2 h-2 rounded-full bg-indigo-500 flex-shrink-0"
                ></span>
                <span>{{ point }}</span>
              </li>
            </ul>
          </div>
        </transition>
      </div>
    </div>
  </section>
</template>

<style scoped>
.fade-slide-enter-active,
.fade-slide-leave-active {
  transition: all 0.3s ease;
}

.fade-slide-enter-from {
  opacity: 0;
  transform: translateX(20px);
}

.fade-slide-leave-to {
  opacity: 0;
  transform: translateX(-20px);
}

.bg-grid-slate-100 {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(241 245 249)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
}
</style>
